var initPhotoSwipeFromDOM=function(e){for(var t=function(e){for(var i,o,l,u,t=e.childNodes,n=t.length,r=[],d=0;n>d;d++)i=t[d],1===i.nodeType&&(o=i.children[0],l=o.getAttribute("data-size").split("x"),u={src:o.getAttribute("href"),w:parseInt(l[0],10),h:parseInt(l[1],10)},i.children.length>1&&(u.title=i.children[1].innerHTML),o.children.length>0&&(u.msrc=o.children[0].getAttribute("src")),u.el=i,r.push(u));return r},n=function f(e,t){return e&&(t(e)?e:f(e.parentNode,t))},r=function(e){e=e||window.event,e.preventDefault?e.preventDefault():e.returnValue=!1;var t=e.target||e.srcElement,r=n(t,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(r){for(var d,i=r.parentNode,o=r.parentNode.childNodes,l=o.length,u=0,f=0;l>f;f++)if(1===o[f].nodeType){if(o[f]===r){d=u;break}u++}return d>=0&&a(d,i),!1}},i=function(){var e=window.location.hash.substring(1),t={};if(e.length<5)return t;for(var n=e.split("&"),r=0;r<n.length;r++)if(n[r]){var i=n[r].split("=");i.length<2||(t[i[0]]=i[1])}return t.gid&&(t.gid=parseInt(t.gid,10)),t.hasOwnProperty("pid")?(t.pid=parseInt(t.pid,10),t):t},a=function(e,n,r){var a,o,l,i=document.querySelectorAll(".pswp")[0];l=t(n),o={index:e,galleryUID:n.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=l[e].el.getElementsByTagName("img")[0],n=window.pageYOffset||document.documentElement.scrollTop,r=t.getBoundingClientRect();return{x:r.left,y:r.top+n,w:r.width}},history:!1,focus:!1},r&&(o.showAnimationDuration=0),a=new PhotoSwipe(i,PhotoSwipeUI_Default,l,o),a.init()},o=document.querySelectorAll(e),l=0,u=o.length;u>l;l++)o[l].setAttribute("data-pswp-uid",l+1),o[l].onclick=r;var d=i();d.pid>0&&d.gid>0&&a(d.pid-1,o[d.gid-1],!0)};initPhotoSwipeFromDOM(".gallery");
